(()=>{"use strict";var e={377:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,".QU11EUQK8wT5OR7niN7v{height:50px;margin-top:auto}.QU11EUQK8wT5OR7niN7v .yv8nZtgYUW3elhniJxB8{display:flex;justify-content:space-around;align-items:center}.QU11EUQK8wT5OR7niN7v .yv8nZtgYUW3elhniJxB8 .gLbOItwcnL72MYWa4t0a .dFGfRGsELHPI7Xl2ZWL3{filter:invert(1)}.QU11EUQK8wT5OR7niN7v .yv8nZtgYUW3elhniJxB8 .WjTZyaB7rwASdpBI4Vk5 .yFNmio6dzuz8ILqEr6iF{max-height:50px}",""]),a.locals={footer:"QU11EUQK8wT5OR7niN7v",footerInner:"yv8nZtgYUW3elhniJxB8",githubLink:"gLbOItwcnL72MYWa4t0a",linkImage:"dFGfRGsELHPI7Xl2ZWL3",linkSchool:"WjTZyaB7rwASdpBI4Vk5",logoSchool:"yFNmio6dzuz8ILqEr6iF"};const r=a},713:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,".YbpQ9gtMrwOGgKdlVAt7{display:flex;justify-content:space-around;align-items:center;height:80px}",""]),a.locals={headerInner:"YbpQ9gtMrwOGgKdlVAt7"};const r=a},985:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,".GR68F5W4JQcNF7X9PZoq{display:flex;flex-grow:1;max-height:calc(100vh - 130px)}.GR68F5W4JQcNF7X9PZoq .K5qkcSsgsIMTHJrMAgJh{display:flex;width:100%}",""]),a.locals={main:"GR68F5W4JQcNF7X9PZoq",mainInner:"K5qkcSsgsIMTHJrMAgJh"};const r=a},479:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,'.NHdI8WfnL_Qt84EanP8D{display:flex;flex-direction:column;align-items:center;width:70%;border:1px solid #000}.NHdI8WfnL_Qt84EanP8D .p_Ff4a4XBpwmR72iDUGu{margin:auto}.NHdI8WfnL_Qt84EanP8D .tbAoWpDQcuuQOi2AclGQ{justify-self:start;height:60px;width:100%;border:1px solid #000}.NHdI8WfnL_Qt84EanP8D .tbAoWpDQcuuQOi2AclGQ .sEejf0HS1vekoI6ag7um{text-align:center;margin:10px;font-size:1.5rem;font-style:bold}.NHdI8WfnL_Qt84EanP8D .syDcxQLfsmuwx5QRVUOQ{display:flex;flex-direction:column;overflow-y:scroll;width:100%;height:calc(100% - 180px);gap:10px;padding:15px}.NHdI8WfnL_Qt84EanP8D .syDcxQLfsmuwx5QRVUOQ>p{align-self:center;height:100%}.NHdI8WfnL_Qt84EanP8D .CVgUqVtnFzqYfu5jLcPY{display:flex;align-items:end;width:95%}.NHdI8WfnL_Qt84EanP8D .CVgUqVtnFzqYfu5jLcPY .ol0TsE0qYyy7wTjt6zh2{width:100%;height:120px;word-wrap:break-word;border-radius:10px}.NHdI8WfnL_Qt84EanP8D .CVgUqVtnFzqYfu5jLcPY .ol0TsE0qYyy7wTjt6zh2:invalid{border:1px solid #000}[data-online]::after{margin-left:15px;font-size:1rem;opacity:.7}[data-online=true]::after{color:green;content:"В сети"}[data-online=false]::after{color:red;content:"Не в сети"}',""]),a.locals={dialogue:"NHdI8WfnL_Qt84EanP8D",startMessage:"p_Ff4a4XBpwmR72iDUGu",headerDialogue:"tbAoWpDQcuuQOi2AclGQ",userName:"sEejf0HS1vekoI6ag7um",messages:"syDcxQLfsmuwx5QRVUOQ",messageForm:"CVgUqVtnFzqYfu5jLcPY",messageInput:"ol0TsE0qYyy7wTjt6zh2"};const r=a},682:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,'.j6fC13fBR7eG3UYKr7bS{position:relative;align-self:flex-start;width:80%;padding:5px 5px 20px 5px;white-space:pre-wrap;word-wrap:break-word;border-radius:10px;border:1px dashed #000;box-shadow:0 0 5px 1px #000}.j6fC13fBR7eG3UYKr7bS .F1W_rVWL7Byvt0Q3jT0z{position:absolute;right:10px}.j6fC13fBR7eG3UYKr7bS .F1W_rVWL7Byvt0Q3jT0z::after{content:"Отправлено";margin-left:20px;opacity:.6}[data-outcoming=true]{align-self:flex-end;background-color:rgba(0,0,0,.1254901961)}[data-is-delivered=true] .F1W_rVWL7Byvt0Q3jT0z::after{content:"Доставлено"}[data-is-readed=true] .F1W_rVWL7Byvt0Q3jT0z::after{content:"Прочитано"}[data-is-edited=true] .F1W_rVWL7Byvt0Q3jT0z::after{content:"Изменено"}[data-is-deleted=true] .F1W_rVWL7Byvt0Q3jT0z::after{content:"Удалено"}',""]),a.locals={message:"j6fC13fBR7eG3UYKr7bS",messageDate:"F1W_rVWL7Byvt0Q3jT0z"};const r=a},161:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,".K98daOlvBJZzvFwBJphC{position:relative;flex-shrink:0;flex-basis:30%;margin:0;height:100%;border:1px solid #000;overflow:scroll}.K98daOlvBJZzvFwBJphC .opLD4mPXPMHX5kVpmo9K{position:sticky;transform:translateX(-30px);width:100%;margin:10px;background-color:#fff}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm{display:flex;align-items:baseline;justify-content:space-between}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm .cict787Yh_lLYToBR5PL{user-select:none;cursor:pointer}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm .erFz2yPREKdDiaKJp0t7{width:1.2rem;height:1.2rem;padding:.1rem;border-radius:50%;color:#fff;font-weight:bold;text-align:center;background-color:red}.K98daOlvBJZzvFwBJphC .m2eul6CV1o6RwDwYipVn::marker{color:green;font-size:24px}.K98daOlvBJZzvFwBJphC .id0hpQVjzXxtJwvBNyyQ::marker{color:red;font-size:24px}",""]),a.locals={list:"K98daOlvBJZzvFwBJphC",input:"opLD4mPXPMHX5kVpmo9K",contactWrap:"HAiJk4LZbDqAVw0UHJhm",contact:"cict787Yh_lLYToBR5PL",counter:"erFz2yPREKdDiaKJp0t7",active:"m2eul6CV1o6RwDwYipVn",offline:"id0hpQVjzXxtJwvBNyyQ"};const r=a},179:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,"",""]),a.locals={};const r=a},771:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,"",""]),a.locals={};const r=a},695:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,".cOwPEmal6rpCMrg8YeSg{width:80px;height:25px}.cOwPEmal6rpCMrg8YeSg:hover{scale:1.1;cursor:pointer}.cOwPEmal6rpCMrg8YeSg:disabled{opacity:.9;cursor:default}",""]),a.locals={button:"cOwPEmal6rpCMrg8YeSg"};const r=a},281:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,".upeDYVY5rjZuo92lox9J{padding:5px 15px;height:45px}.upeDYVY5rjZuo92lox9J:invalid{border:1px dashed red}.upeDYVY5rjZuo92lox9J:hover,.upeDYVY5rjZuo92lox9J:focus{border:2px solid #000;cursor:pointer;outline:none}.upeDYVY5rjZuo92lox9J:hover:invalid,.upeDYVY5rjZuo92lox9J:focus:invalid{border-color:red}.upeDYVY5rjZuo92lox9J::placeholder{color:#333}",""]),a.locals={input:"upeDYVY5rjZuo92lox9J"};const r=a},962:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,".h2ljNwAH8BHj4k4I803A{position:absolute;z-index:100;display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;background-color:#fff}.h2ljNwAH8BHj4k4I803A>*{display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;gap:10px;width:40%;height:40%;padding:15px;border:1px solid #000;box-shadow:0 0 30px 5px #222}.uSLqwUWm7rXwdTmq5eQW{display:none}",""]),a.locals={modal:"h2ljNwAH8BHj4k4I803A",hidden:"uSLqwUWm7rXwdTmq5eQW"};const r=a},2:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,"*{box-sizing:border-box}body{display:flex;flex-direction:column;margin:0;padding:10px;min-height:100vh;max-width:100vw;overflow:hidden}",""]);const r=a},245:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),o=n(314),a=n.n(o)()(i());a.push([e.id,"html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}h1{font-size:2em;margin:.67em 0}dl dl,dl ol,dl ul,ol dl,ul dl{margin:0}ol ol,ol ul,ul ol,ul ul{margin:0}hr{box-sizing:content-box;color:inherit;height:0;overflow:visible}main{display:block}pre{font-family:monospace,monospace;font-size:1em}a{background-color:rgba(0,0,0,0)}abbr[title]{text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}table{border-color:inherit;text-indent:0}button,input,select{margin:0}button{overflow:visible;text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}fieldset{padding:.35em .75em .625em}input{overflow:visible}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;white-space:normal}progress{display:inline-block;vertical-align:baseline}select{text-transform:none}textarea{margin:0;overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}details{display:block}dialog{background-color:#fff;border:solid;color:#000;display:block;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;left:0;margin:auto;padding:1em;position:absolute;right:0;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}dialog:not([open]){display:none}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}",""]);const r=a},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",s=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),s&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),s&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,s,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(s)for(var r=0;r<this.length;r++){var l=this[r][0];null!=l&&(a[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);s&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,s=0;s<t.length;s++)if(t[s].identifier===e){n=s;break}return n}function s(e,s){for(var o={},a=[],r=0;r<e.length;r++){var l=e[r],d=s.base?l[0]+s.base:l[0],c=o[d]||0,p="".concat(d," ").concat(c);o[d]=c+1;var u=n(p),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(m);else{var h=i(m,s);s.byIndex=r,t.splice(r,0,{identifier:p,updater:h,references:1})}a.push(p)}return a}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=s(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var r=n(o[a]);t[r].references--}for(var l=s(e,i),d=0;d<o.length;d++){var c=n(o[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},659:e=>{var t={};e.exports=function(e,n){var s=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var s="";n.supports&&(s+="@supports (".concat(n.supports,") {")),n.media&&(s+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(s+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),s+=n.css,i&&(s+="}"),n.media&&(s+="}"),n.supports&&(s+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={id:s,exports:{}};return e[s](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var i=s.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=s[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.nc=void 0,(()=>{var e=n(72),t=n.n(e),s=n(825),i=n.n(s),o=n(659),a=n.n(o),r=n(56),l=n.n(r),d=n(540),c=n.n(d),p=n(113),u=n.n(p),m=n(962),h={};h.styleTagTransform=u(),h.setAttributes=l(),h.insert=a().bind(null,"head"),h.domAPI=i(),h.insertStyleElement=c(),t()(m.A,h);const g=m.A&&m.A.locals?m.A.locals:void 0;class f extends HTMLDivElement{constructor(...e){super(),this.className=g.modal,this.append(...e)}show(){this.classList.remove(g.hidden)}hide(){this.classList.add(g.hidden)}}customElements.define("custom-modal",f,{extends:"div"});var v=n(695),b={};b.styleTagTransform=u(),b.setAttributes=l(),b.insert=a().bind(null,"head"),b.domAPI=i(),b.insertStyleElement=c(),t()(v.A,b);const y=v.A&&v.A.locals?v.A.locals:void 0;class x extends HTMLInputElement{constructor(e="button",t="button",n=!1){super(),this.className=y.button,this.type=t,this.value=e,this.disabled=n}}customElements.define("custom-btn",x,{extends:"input"});var w=n(281),A={};A.styleTagTransform=u(),A.setAttributes=l(),A.insert=a().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=c(),t()(w.A,A);const E=w.A&&w.A.locals?w.A.locals:void 0;class L extends HTMLInputElement{constructor(e="Введитие текст",t="text",n,s){super(),this.className=E.input,this.classList.add(n??E.input),this.type=t,this.placeholder=e,s&&(this.name=s)}}function S(e="div",t,n,...s){const i=document.createElement(e);return i.classList.add(...t??[]),n&&Object.entries(n).forEach((([e,t])=>{i.setAttribute(e,t)})),i.append(...s),i}customElements.define("custom-text-input",L,{extends:"input"});var T=n(771),I={};I.styleTagTransform=u(),I.setAttributes=l(),I.insert=a().bind(null,"head"),I.domAPI=i(),I.insertStyleElement=c(),t()(T.A,I);const k=T.A&&T.A.locals?T.A.locals:void 0;function C(e){const{target:t}=e;if(t instanceof HTMLInputElement){switch(!0){case t.validity.tooShort:"password"===t.type?t.setCustomValidity("Пароль не должен быть короче 6 символов. Исползуйте цифры, строчные и заглавные буквы"):t.setCustomValidity("Имя слишком короткое!");break;case t.validity.tooLong:t.setCustomValidity("Имя не должно быть больше 20 символов");break;case t.validity.patternMismatch:t.setCustomValidity("Пароль должен содержать как минимум одну цифру, одну строчную букву и одну заглавную букву");break;default:t.setCustomValidity("")}t.reportValidity()}}function N(e){let t=null;if(e.target instanceof HTMLInputElement&&(t=e.target.form),t instanceof HTMLFormElement){const e=t.querySelector('[type="submit"]');e instanceof HTMLInputElement&&(e.disabled=!t.checkValidity())}}function D(e){const t=new FormData(e),n={};return t.forEach(((e,t)=>{n[t]=e})),n}class Q{static updateUsers(){Q.chat.send(JSON.stringify({id:"activeUser",type:"USER_ACTIVE",payload:null})),Q.chat.send(JSON.stringify({id:"inactiveUser",type:"USER_INACTIVE",payload:null}))}static messagesFrom(e){const t={id:e,type:"MSG_FROM_USER",payload:{user:{login:e}}};e!==sessionStorage.getItem("login")&&Q.chat.send(JSON.stringify(t))}}Q.chat=new WebSocket("ws://127.0.0.1:4000");const U=Q;class F extends f{constructor(){if(super(),this.formLogin=S("form",[k.form],{name:"login"}),F.node)return;F.node=this;const[e,t,n,s]=[new L("Имя","text"),new L("Пароль","password"),new x("Войти","submit"),new x("Инфо")];e.required=!0,e.autofocus=!0,e.name="login",e.addEventListener("input",C),e.minLength=3,e.maxLength=20,t.required=!0,t.name="password",t.pattern="(?=.*[a-zа-я])(?=.*[A-ZА-Я])(?=.*[0-9]).*",t.addEventListener("input",C),t.minLength=6,n.disabled=!0;const i=S("legend",[k.legend]);i.textContent="Авторизация пользователя",this.formLogin.append(i,e,t,n,s),this.append(this.formLogin),this.formInit()}static close(){F.node?.remove(),F.node=void 0}formInit(){this.formLogin.addEventListener("submit",(e=>{e.preventDefault();const t=D(this.formLogin);Object.entries(t).forEach((([e,t])=>{sessionStorage.setItem(e,t)}));const n={id:"authUser",type:"USER_LOGIN",payload:{user:t}};U.chat.send(JSON.stringify(n))})),this.formLogin.addEventListener("input",N)}}customElements.define("modal-login",F,{extends:"div"});var J=n(2),j={};j.styleTagTransform=u(),j.setAttributes=l(),j.insert=a().bind(null,"head"),j.domAPI=i(),j.insertStyleElement=c(),t()(J.A,j),J.A&&J.A.locals&&J.A.locals;var M=n(245),V={};V.styleTagTransform=u(),V.setAttributes=l(),V.insert=a().bind(null,"head"),V.domAPI=i(),V.insertStyleElement=c(),t()(M.A,V),M.A&&M.A.locals&&M.A.locals;const z=n.p+"img/githublink.62e036ce8c18165793a3.png";var O=n(377),R={};R.styleTagTransform=u(),R.setAttributes=l(),R.insert=a().bind(null,"head"),R.domAPI=i(),R.insertStyleElement=c(),t()(O.A,R);const H=O.A&&O.A.locals?O.A.locals:void 0;class Y extends HTMLDivElement{constructor(){super();const e=S("a",[H.githubLink],{href:"https://github.com/AndreiMakhnach2209"},S("img",[H.linkImage],{src:z,alt:"Andrei Makhnach"})),t=S("a",[H.linkSchool],{href:"https://rs.school/"},S("img",[H.logoSchool],{src:"https://rollingscopes.com/assets/rs-logo-2XN05XgC.webp",alt:"RSSchool"}));this.className=H.footerInner,this.append(e,"2024",t)}insert(){document.body.append(S("footer",[H.footer],{},this))}}customElements.define("footer-inner",Y,{extends:"div"});var P=n(479),W={};W.styleTagTransform=u(),W.setAttributes=l(),W.insert=a().bind(null,"head"),W.domAPI=i(),W.insertStyleElement=c(),t()(P.A,W);const B=P.A&&P.A.locals?P.A.locals:void 0;var _=n(682),q={};q.styleTagTransform=u(),q.setAttributes=l(),q.insert=a().bind(null,"head"),q.domAPI=i(),q.insertStyleElement=c(),t()(_.A,q);const Z=_.A&&_.A.locals?_.A.locals:void 0;class G extends HTMLDivElement{constructor(e){super(),this.messageState=S(),this.className=Z.message,e&&(e.from===sessionStorage.getItem("login")&&(this.dataset.outcoming="true"),[this.dataset.isDelivered,this.dataset.isReaded,this.dataset.isDeleted,this.dataset.isEdited]=[e.status?.isDelivered?.toString(),e.status?.isReaded?.toString(),e.status?.isDeleted?.toString(),e.status?.isEdited?.toString()],this.messageState.append(S("span",[Z.messageDate],{},e?.datetime?new Date(e.datetime).toLocaleString():"")),this.append(S("p",[Z.textContent],{},"false"===this.dataset.isDeleted?"Сообщение удалено":e.text),this.messageState))}}var K;customElements.define("message-element",G,{extends:"div"});class X{static init(){this.messageInput.required=!0,this.messageForm.addEventListener("input",N),this.messageForm.addEventListener("submit",(e=>{e.preventDefault();const t=D(this.messageForm);this.messageForm.reset(),this.messageForm.querySelector('[type="submit"').disabled=!0;const n={id:"sending_message",type:"MSG_SEND",payload:{message:{to:this.login||"",text:t.message}}};U.chat.send(JSON.stringify(n))}))}static open(e){this.node.innerHTML="",this.login=e.login;const t=S("p",[B.userName],{},this.login);t.dataset.online=e.isLogined?.toString(),this.node.append(S("div",[B.headerDialogue],{},S("span",[],{},t)),this.messagesContainer,this.messageForm),U.messagesFrom(e.login)}static showMessage(e){e?.length?(this.messagesContainer.innerHTML="",e.forEach((e=>{this.addMessage(e)}))):this.messagesContainer.innerHTML="<p>Здесь пока нет сообщений</p>"}static addMessage(e){this.messagesContainer.append(new G(e))}static updateCurrentDialogue(e){e?.forEach((e=>{K.login===e.login&&K.open(e)}))}}K=X,X.node=S("div",[B.dialogue],{},S("p",[B.startMessage],{},"Выберите пользователя для получения и отправки сообщений")),X.messagesContainer=S("div",[B.messages]),X.messageInput=new L("Введите здесь свое сообщение","textarea",B.messageInput,"message"),X.messageForm=S("form",[B.messageForm],{name:"messageForm"},K.messageInput,new x("Отправить","submit",!0)),X.login=null;const $=X;var ee=n(161),te={};te.styleTagTransform=u(),te.setAttributes=l(),te.insert=a().bind(null,"head"),te.domAPI=i(),te.insertStyleElement=c(),t()(ee.A,te);const ne=ee.A&&ee.A.locals?ee.A.locals:void 0;class se{static init(){se.input.addEventListener("input",(({target:e})=>{const t=e;se.view(se.userList.filter((e=>e.login.toLowerCase().includes(t.value.toLowerCase()))))}))}static clear(){for(;!(this.node.lastChild instanceof HTMLInputElement);)this.node.lastChild?.remove()}static reset(){this.userList.length=0}static view(e=this.userList){this.clear(),e.forEach((e=>{if(sessionStorage.getItem("login")!==e.login){const t=S("li",[e.isLogined?ne.active:ne.offline,ne.contact]);t.addEventListener("click",(()=>{$.open(e)})),t.textContent=e.login,t.dataset.login=e.login,this.privateNode.append(S("div",[ne.contactWrap],{},t))}}))}static addUser(...e){this.userList.push(...e),e.forEach((e=>{U.messagesFrom(e.login)})),this.view()}static get node(){return this.privateNode}static updateCounter(e,t){const n=document.querySelector(`[data-login="${e}"]`),s=S("span",[ne.counter],{},t?.toString()||"");t&&n?.nextSibling?n.nextSibling.replaceWith(s):0!==t&&n?.after(s)}}se.userList=[],se.input=new L("Введите имя пользователя","text",ne.input,"userSearch"),se.privateNode=S("ul",[ne.list],{},se.input);const ie=se;var oe=n(713),ae={};ae.styleTagTransform=u(),ae.setAttributes=l(),ae.insert=a().bind(null,"head"),ae.domAPI=i(),ae.insertStyleElement=c(),t()(oe.A,ae);const re=oe.A&&oe.A.locals?oe.A.locals:void 0;class le extends HTMLDivElement{constructor(e){super();const t=e.payload?.user?.login,n=S("span",[re.userName]);n.textContent=t||null;const s=S("h1",[re.title]);s.textContent="RSS-чат";const i=new x("Выйти"),o={id:"log_out",type:"USER_LOGOUT",payload:{user:{login:t??sessionStorage.getItem("login"),password:sessionStorage.getItem("password")}}};i.addEventListener("click",(()=>{U.chat.send(JSON.stringify(o)),ie.reset(),function(){for(;document.body.firstChild;)document.body.firstChild.remove()}(),sessionStorage.clear(),document.body.append(new F)})),this.className=re.headerInner,this.append(n,s,i)}insert(){document.body.prepend(S("header",[re.header],{},this))}}customElements.define("header-inner",le,{extends:"div"});var de=n(985),ce={};ce.styleTagTransform=u(),ce.setAttributes=l(),ce.insert=a().bind(null,"head"),ce.domAPI=i(),ce.insertStyleElement=c(),t()(de.A,ce);const pe=de.A&&de.A.locals?de.A.locals:void 0;class ue extends HTMLDivElement{constructor(){super(),this.className=pe.mainInner,this.append(ie.node,$.node)}init(e){document.body.append(S("main",[pe.main],{},this)),ie.init(),$.init(),F.close(),new le(e).insert(),(new Y).insert(),U.updateUsers()}}customElements.define("main-inner",ue,{extends:"div"});var me=n(179),he={};he.styleTagTransform=u(),he.setAttributes=l(),he.insert=a().bind(null,"head"),he.domAPI=i(),he.insertStyleElement=c(),t()(me.A,he);const ge=me.A&&me.A.locals?me.A.locals:void 0;class fe extends f{constructor(e){super(),this.classList.add(ge.modal);const t=new x("Зактрыть");t.addEventListener("click",(()=>this.remove()));const n=S("div",[ge.message],{},e||"",t);this.append(n),setTimeout((()=>t.focus()),500)}}customElements.define("error-message",fe,{extends:"div"}),U.chat.addEventListener("message",(async({data:e})=>{const t=await JSON.parse(e);switch(t.type){case"USER_LOGIN":(new ue).init(t);break;case"USER_ACTIVE":case"USER_INACTIVE":$.updateCurrentDialogue(t.payload?.users),ie.addUser(...t.payload?.users||[]);break;case"MSG_FROM_USER":t.id===$.login&&$.showMessage(t.payload?.messages),t.id&&ie.updateCounter(t.id,t.payload?.messages?.filter((e=>!e.status?.isReaded&&e.from!==sessionStorage.getItem("login"))).length);break;case"MSG_SEND":$.addMessage(t.payload?.message);break;case"USER_EXTERNAL_LOGIN":case"USER_EXTERNAL_LOGOUT":ie.reset(),U.updateUsers();break;case"ERROR":document.body.append(new fe(t.payload?.error))}})),document.body.append(new F)})()})();