(()=>{"use strict";var e={377:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,".QU11EUQK8wT5OR7niN7v{height:50px;margin-top:auto}.QU11EUQK8wT5OR7niN7v .yv8nZtgYUW3elhniJxB8{display:flex;justify-content:space-around;align-items:center}.QU11EUQK8wT5OR7niN7v .yv8nZtgYUW3elhniJxB8 .gLbOItwcnL72MYWa4t0a .dFGfRGsELHPI7Xl2ZWL3{filter:invert(1)}.QU11EUQK8wT5OR7niN7v .yv8nZtgYUW3elhniJxB8 .WjTZyaB7rwASdpBI4Vk5 .yFNmio6dzuz8ILqEr6iF{max-height:50px}",""]),o.locals={footer:"QU11EUQK8wT5OR7niN7v",footerInner:"yv8nZtgYUW3elhniJxB8",githubLink:"gLbOItwcnL72MYWa4t0a",linkImage:"dFGfRGsELHPI7Xl2ZWL3",linkSchool:"WjTZyaB7rwASdpBI4Vk5",logoSchool:"yFNmio6dzuz8ILqEr6iF"};const r=o},713:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,".YbpQ9gtMrwOGgKdlVAt7{display:flex;justify-content:space-around;align-items:center;height:80px}",""]),o.locals={headerInner:"YbpQ9gtMrwOGgKdlVAt7"};const r=o},985:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,".GR68F5W4JQcNF7X9PZoq{display:flex;flex-grow:1;max-height:calc(100vh - 130px)}.GR68F5W4JQcNF7X9PZoq .K5qkcSsgsIMTHJrMAgJh{display:flex;width:100%}",""]),o.locals={main:"GR68F5W4JQcNF7X9PZoq",mainInner:"K5qkcSsgsIMTHJrMAgJh"};const r=o},479:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,'.NHdI8WfnL_Qt84EanP8D{display:flex;flex-direction:column;align-items:center;width:70%;border:1px solid #000}.NHdI8WfnL_Qt84EanP8D .p_Ff4a4XBpwmR72iDUGu{margin:auto}.NHdI8WfnL_Qt84EanP8D .tbAoWpDQcuuQOi2AclGQ{justify-self:start;height:60px;width:100%;border:1px solid #000}.NHdI8WfnL_Qt84EanP8D .tbAoWpDQcuuQOi2AclGQ .sEejf0HS1vekoI6ag7um{text-align:center;margin:10px;font-size:1.5rem;font-style:bold}.NHdI8WfnL_Qt84EanP8D .syDcxQLfsmuwx5QRVUOQ{display:flex;flex-direction:column;overflow-y:scroll;width:100%;height:calc(100% - 180px);gap:10px;padding:15px}.NHdI8WfnL_Qt84EanP8D .syDcxQLfsmuwx5QRVUOQ>p{align-self:center;height:100%}.NHdI8WfnL_Qt84EanP8D .syDcxQLfsmuwx5QRVUOQ .fDzqugL_RtzZNipciwxk{display:flex;flex-direction:column;width:100%;gap:10px;border-top:3px dashed #444}.NHdI8WfnL_Qt84EanP8D .syDcxQLfsmuwx5QRVUOQ .fDzqugL_RtzZNipciwxk::before{content:"Непрочитанные сообщения";display:block;text-align:center;font-size:.8rem;opacity:.7}.NHdI8WfnL_Qt84EanP8D .syDcxQLfsmuwx5QRVUOQ .fDzqugL_RtzZNipciwxk:empty{display:none}.NHdI8WfnL_Qt84EanP8D .CVgUqVtnFzqYfu5jLcPY{display:flex;align-items:end;width:95%}.NHdI8WfnL_Qt84EanP8D .CVgUqVtnFzqYfu5jLcPY .ol0TsE0qYyy7wTjt6zh2{width:100%;height:120px;padding:10px;border-radius:10px}.NHdI8WfnL_Qt84EanP8D .CVgUqVtnFzqYfu5jLcPY .ol0TsE0qYyy7wTjt6zh2:invalid{border:1px solid #000}.NHdI8WfnL_Qt84EanP8D .CVgUqVtnFzqYfu5jLcPY [type=submit]{height:100%;width:100px}[data-online]::after{margin-left:15px;font-size:1rem;opacity:.7}[data-online=true]::after{color:green;content:"В сети"}[data-online=false]::after{color:red;content:"Не в сети"}',""]),o.locals={dialogue:"NHdI8WfnL_Qt84EanP8D",startMessage:"p_Ff4a4XBpwmR72iDUGu",headerDialogue:"tbAoWpDQcuuQOi2AclGQ",userName:"sEejf0HS1vekoI6ag7um",messages:"syDcxQLfsmuwx5QRVUOQ",unreadedMessages:"fDzqugL_RtzZNipciwxk",messageForm:"CVgUqVtnFzqYfu5jLcPY",messageInput:"ol0TsE0qYyy7wTjt6zh2"};const r=o},682:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,'.j6fC13fBR7eG3UYKr7bS{position:relative;align-self:flex-start;width:80%;padding:5px 5px 20px 5px;white-space:pre-wrap;word-wrap:break-word;border-radius:10px;border:1px dashed #000;box-shadow:0 0 5px 1px #000}.j6fC13fBR7eG3UYKr7bS .F1W_rVWL7Byvt0Q3jT0z{position:absolute;right:10px}.j6fC13fBR7eG3UYKr7bS .F1W_rVWL7Byvt0Q3jT0z::after{margin-left:20px;opacity:.6}[data-outcoming=true]{align-self:flex-end;background-color:rgba(0,0,0,.1254901961)}[data-outcoming=true] .F1W_rVWL7Byvt0Q3jT0z::after{content:"Отправлено"}[data-is-delivered=true][data-outcoming=true] .F1W_rVWL7Byvt0Q3jT0z::after{content:"Доставлено"}[data-is-readed=true][data-outcoming=true] .F1W_rVWL7Byvt0Q3jT0z::after{content:"Прочитано"}[data-is-edited=true] .F1W_rVWL7Byvt0Q3jT0z::after{content:"Изменено"}[data-is-deleted=true] .F1W_rVWL7Byvt0Q3jT0z::after{content:"Удалено"}',""]),o.locals={message:"j6fC13fBR7eG3UYKr7bS",messageDate:"F1W_rVWL7Byvt0Q3jT0z"};const r=o},161:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,".K98daOlvBJZzvFwBJphC{position:relative;flex-basis:30%;margin:0;height:100%;border:1px solid #000;overflow-y:scroll;overflow-x:hidden}.K98daOlvBJZzvFwBJphC .opLD4mPXPMHX5kVpmo9K{position:sticky;transform:translateX(-30px);width:100%;margin:10px;background-color:#fff}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm{display:flex;align-items:baseline;position:relative;margin-right:5px;white-space:pre-wrap;word-wrap:break-word}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm .cict787Yh_lLYToBR5PL{width:95%;min-height:35px;padding:2px 25px 2px 5px;user-select:none;cursor:pointer;transition:.3s;border-radius:7px}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm .cict787Yh_lLYToBR5PL:hover:not(.e_GSh77oarxAqd37t1pW){box-shadow:0 0 5px 0 #000}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm .e_GSh77oarxAqd37t1pW{font-weight:bold;box-shadow:0 0 10px 0 #000}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm .erFz2yPREKdDiaKJp0t7{position:absolute;right:5px;top:50%;transform:translateY(-50%);width:20px;height:20px;padding:.1rem;border-radius:50%;color:#fff;font-weight:bold;text-align:center;background-color:red}.K98daOlvBJZzvFwBJphC .m2eul6CV1o6RwDwYipVn::marker{color:green;font-size:24px}.K98daOlvBJZzvFwBJphC .id0hpQVjzXxtJwvBNyyQ::marker{color:red;font-size:24px}",""]),o.locals={list:"K98daOlvBJZzvFwBJphC",input:"opLD4mPXPMHX5kVpmo9K",contactWrap:"HAiJk4LZbDqAVw0UHJhm",contact:"cict787Yh_lLYToBR5PL",activeContact:"e_GSh77oarxAqd37t1pW",counter:"erFz2yPREKdDiaKJp0t7",active:"m2eul6CV1o6RwDwYipVn",offline:"id0hpQVjzXxtJwvBNyyQ"};const r=o},179:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,"",""]),o.locals={};const r=o},771:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,"",""]),o.locals={};const r=o},695:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,".cOwPEmal6rpCMrg8YeSg{width:80px;height:35px;border-radius:7px;box-shadow:0 0 5px 0 #000 inset;scale:.9;transition:.3s}.cOwPEmal6rpCMrg8YeSg:enabled:hover{scale:1;cursor:pointer;box-shadow:0 0 10px 0 #000}.cOwPEmal6rpCMrg8YeSg:disabled{opacity:.9;cursor:not-allowed}",""]),o.locals={button:"cOwPEmal6rpCMrg8YeSg"};const r=o},281:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,".upeDYVY5rjZuo92lox9J{padding:5px 15px;height:45px;border-radius:10px}.upeDYVY5rjZuo92lox9J:invalid{border:1px dashed red}.upeDYVY5rjZuo92lox9J:hover,.upeDYVY5rjZuo92lox9J:focus{border:2px solid #000;cursor:pointer;outline:none}.upeDYVY5rjZuo92lox9J:hover:invalid,.upeDYVY5rjZuo92lox9J:focus:invalid{border-color:red}.upeDYVY5rjZuo92lox9J::placeholder{color:#333}",""]),o.locals={input:"upeDYVY5rjZuo92lox9J"};const r=o},962:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,".h2ljNwAH8BHj4k4I803A{position:absolute;z-index:100;display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;background-color:#fff}.h2ljNwAH8BHj4k4I803A>*{display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;gap:10px;width:40%;height:40%;padding:15px;border:1px solid #000;border-radius:10px;box-shadow:0 0 30px 5px #222}.uSLqwUWm7rXwdTmq5eQW{display:none}",""]),o.locals={modal:"h2ljNwAH8BHj4k4I803A",hidden:"uSLqwUWm7rXwdTmq5eQW"};const r=o},2:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,"*{box-sizing:border-box}body{display:flex;flex-direction:column;min-height:100vh;max-width:100vw;overflow:hidden}",""]);const r=o},245:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(601),i=n.n(s),a=n(314),o=n.n(a)()(i());o.push([e.id,"html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}h1{font-size:2em;margin:.67em 0}dl dl,dl ol,dl ul,ol dl,ul dl{margin:0}ol ol,ol ul,ul ol,ul ul{margin:0}hr{box-sizing:content-box;color:inherit;height:0;overflow:visible}main{display:block}pre{font-family:monospace,monospace;font-size:1em}a{background-color:rgba(0,0,0,0)}abbr[title]{text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}table{border-color:inherit;text-indent:0}button,input,select{margin:0}button{overflow:visible;text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}fieldset{padding:.35em .75em .625em}input{overflow:visible}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;white-space:normal}progress{display:inline-block;vertical-align:baseline}select{text-transform:none}textarea{margin:0;overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}details{display:block}dialog{background-color:#fff;border:solid;color:#000;display:block;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;left:0;margin:auto;padding:1em;position:absolute;right:0;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}dialog:not([open]){display:none}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}",""]);const r=o},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",s=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),s&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),s&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,s,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(s)for(var r=0;r<this.length;r++){var d=this[r][0];null!=d&&(o[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);s&&o[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,s=0;s<t.length;s++)if(t[s].identifier===e){n=s;break}return n}function s(e,s){for(var a={},o=[],r=0;r<e.length;r++){var d=e[r],l=s.base?d[0]+s.base:d[0],c=a[l]||0,p="".concat(l," ").concat(c);a[l]=c+1;var u=n(p),m={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)t[u].references++,t[u].updater(m);else{var h=i(m,s);s.byIndex=r,t.splice(r,0,{identifier:p,updater:h,references:1})}o.push(p)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=s(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var r=n(a[o]);t[r].references--}for(var d=s(e,i),l=0;l<a.length;l++){var c=n(a[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}a=d}}},659:e=>{var t={};e.exports=function(e,n){var s=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var s="";n.supports&&(s+="@supports (".concat(n.supports,") {")),n.media&&(s+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(s+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),s+=n.css,i&&(s+="}"),n.media&&(s+="}"),n.supports&&(s+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={id:s,exports:{}};return e[s](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var i=s.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=s[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.nc=void 0,(()=>{var e=n(72),t=n.n(e),s=n(825),i=n.n(s),a=n(659),o=n.n(a),r=n(56),d=n.n(r),l=n(540),c=n.n(l),p=n(113),u=n.n(p),m=n(962),h={};h.styleTagTransform=u(),h.setAttributes=d(),h.insert=o().bind(null,"head"),h.domAPI=i(),h.insertStyleElement=c(),t()(m.A,h);const g=m.A&&m.A.locals?m.A.locals:void 0;class f extends HTMLDivElement{constructor(...e){super(),this.className=g.modal,this.append(...e)}show(){this.classList.remove(g.hidden)}hide(){this.classList.add(g.hidden)}}customElements.define("custom-modal",f,{extends:"div"});var v=n(695),y={};y.styleTagTransform=u(),y.setAttributes=d(),y.insert=o().bind(null,"head"),y.domAPI=i(),y.insertStyleElement=c(),t()(v.A,y);const b=v.A&&v.A.locals?v.A.locals:void 0;class x extends HTMLInputElement{constructor(e="button",t="button",n=!1,s){super(),this.className=b.button,this.type=t,this.value=e,this.disabled=n,s&&(this.name=s)}}customElements.define("custom-btn",x,{extends:"input"});var w=n(281),A={};A.styleTagTransform=u(),A.setAttributes=d(),A.insert=o().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=c(),t()(w.A,A);const E=w.A&&w.A.locals?w.A.locals:void 0;class L extends HTMLInputElement{constructor(e="Введитие текст",t="text",n,s){super(),this.className=E.input,this.classList.add(n??E.input),this.type=t,this.placeholder=e,s&&(this.name=s)}}function S(e="div",t,n,...s){const i=document.createElement(e);return i.classList.add(...t??[]),n&&Object.entries(n).forEach((([e,t])=>{i.setAttribute(e,t)})),i.append(...s),i}customElements.define("custom-text-input",L,{extends:"input"});var T=n(771),I={};I.styleTagTransform=u(),I.setAttributes=d(),I.insert=o().bind(null,"head"),I.domAPI=i(),I.insertStyleElement=c(),t()(T.A,I);const C=T.A&&T.A.locals?T.A.locals:void 0;function k(e){const{target:t}=e;if(t instanceof HTMLInputElement){switch(!0){case t.validity.tooShort:"password"===t.type?t.setCustomValidity("Пароль не должен быть короче 6 символов. Исползуйте цифры, строчные и заглавные буквы"):t.setCustomValidity("Имя слишком короткое!");break;case t.validity.tooLong:t.setCustomValidity("Имя не должно быть больше 20 символов");break;case t.validity.patternMismatch:t.setCustomValidity("Пароль должен содержать как минимум одну цифру, одну строчную букву и одну заглавную букву");break;default:t.setCustomValidity("")}t.reportValidity()}}function D(e){let t=null;if((e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)&&(t=e.target.form),t instanceof HTMLFormElement){const e=t.querySelector('[type="submit"]');e instanceof HTMLInputElement&&(e.disabled=!t.checkValidity())}}function U(e){const t=new FormData(e),n={};return t.forEach(((e,t)=>{n[t]=e})),n}class N{static updateUsers(){N.chat.send(JSON.stringify({id:"activeUser",type:"USER_ACTIVE",payload:null})),N.chat.send(JSON.stringify({id:"inactiveUser",type:"USER_INACTIVE",payload:null}))}static messagesFrom(e){const t={id:e,type:"MSG_FROM_USER",payload:{user:{login:e}}};e!==sessionStorage.getItem("login")&&N.chat.send(JSON.stringify(t))}static fixReadingState(e){const t={id:`READ_STATE_FROM_${e}`,type:"MSG_READ",payload:{message:{id:e}}};N.chat.send(JSON.stringify(t))}}N.chat=new WebSocket("ws://127.0.0.1:4000");const R=N;class Q extends f{constructor(){if(super(),this.formLogin=S("form",[C.form],{name:"login"}),Q.node)return;Q.node=this;const[e,t,n,s]=[new L("Имя","text"),new L("Пароль","password"),new x("Войти","submit"),new x("Инфо")];e.required=!0,e.autofocus=!0,e.name="login",e.addEventListener("input",k),e.minLength=3,e.maxLength=20,t.required=!0,t.name="password",t.pattern="(?=.*[a-zа-я])(?=.*[A-ZА-Я])(?=.*[0-9]).*",t.addEventListener("input",k),t.minLength=6,n.disabled=!0;const i=S("legend",[C.legend]);i.textContent="Авторизация пользователя",this.formLogin.append(i,e,t,n,s),this.append(this.formLogin),this.formInit()}static close(){Q.node?.remove(),Q.node=void 0}formInit(){this.formLogin.addEventListener("submit",(e=>{e.preventDefault();const t=U(this.formLogin);Object.entries(t).forEach((([e,t])=>{sessionStorage.setItem(e,t)}));const n={id:"authUser",type:"USER_LOGIN",payload:{user:t}};R.chat.send(JSON.stringify(n))})),this.formLogin.addEventListener("input",D)}}customElements.define("modal-login",Q,{extends:"div"});var O=n(2),z={};z.styleTagTransform=u(),z.setAttributes=d(),z.insert=o().bind(null,"head"),z.domAPI=i(),z.insertStyleElement=c(),t()(O.A,z),O.A&&O.A.locals&&O.A.locals;var F=n(245),J={};J.styleTagTransform=u(),J.setAttributes=d(),J.insert=o().bind(null,"head"),J.domAPI=i(),J.insertStyleElement=c(),t()(F.A,J),F.A&&F.A.locals&&F.A.locals;var M=n(179),V={};V.styleTagTransform=u(),V.setAttributes=d(),V.insert=o().bind(null,"head"),V.domAPI=i(),V.insertStyleElement=c(),t()(M.A,V);const W=M.A&&M.A.locals?M.A.locals:void 0;class _ extends f{constructor(e){super(),this.classList.add(W.modal);const t=new x("Зактрыть");t.addEventListener("click",(()=>this.remove()));const n=S("div",[W.message],{},e||"",t);this.append(n),setTimeout((()=>t.focus()),500)}}customElements.define("error-message",_,{extends:"div"});var j=n(479),H={};H.styleTagTransform=u(),H.setAttributes=d(),H.insert=o().bind(null,"head"),H.domAPI=i(),H.insertStyleElement=c(),t()(j.A,H);const B=j.A&&j.A.locals?j.A.locals:void 0;var P=n(682),Y={};Y.styleTagTransform=u(),Y.setAttributes=d(),Y.insert=o().bind(null,"head"),Y.domAPI=i(),Y.insertStyleElement=c(),t()(P.A,Y);const q=P.A&&P.A.locals?P.A.locals:void 0;class Z extends HTMLDivElement{constructor(e){super(),this.messageState=S(),this.className=q.message,e&&(this.payload=e,e.from===sessionStorage.getItem("login")&&(this.dataset.outcoming="true"),[this.dataset.isDelivered,this.dataset.isReaded,this.dataset.isDeleted,this.dataset.isEdited]=[e.status?.isDelivered?.toString(),e.status?.isReaded?.toString(),e.status?.isDeleted?.toString(),e.status?.isEdited?.toString()],this.messageState.append(S("span",[q.messageDate],{},e?.datetime?new Date(e.datetime).toLocaleString():"")),this.append(S("p",[q.textContent],{},"false"===this.dataset.isDeleted?"Сообщение удалено":e.text),this.messageState))}}customElements.define("message-element",Z,{extends:"div"});class G{constructor(){G.node=S("div",[B.dialogue],{},S("p",[B.startMessage],{},"Выберите пользователя для получения и отправки сообщений")),G.unreadedWrap=S("div",[B.unreadedMessages]),G.messagesContainer=S("div",[B.messages]),G.messageInput=S("textarea",[B.messageInput],{name:"message",placeholder:"Введите здесь свое сообщение",autocomplete:"off"}),G.messageForm=S("form",[B.messageForm],{name:"messageForm",id:"messageForm"},G.messageInput,new x("Отправить","submit",!0,"submitBtn")),G.currentUser=null,G.init()}static init(){this.messageInput.required=!0,this.messageForm.addEventListener("input",D),this.messageForm.addEventListener("submit",(e=>{e.preventDefault();const t=U(this.messageForm);this.messageForm.reset(),this.messageForm.elements.namedItem("submitBtn").disabled=!0;const n={id:"sending_message",type:"MSG_SEND",payload:{message:{to:this.currentUser||"",text:t.message}}};R.chat.send(JSON.stringify(n)),this.fixReadingState()})),G.messagesContainer.addEventListener("wheel",(()=>{this.fixReadingState()})),G.messagesContainer.addEventListener("click",(()=>{this.fixReadingState()})),this.messageInput.addEventListener("keyup",(e=>{e instanceof KeyboardEvent&&"Enter"===e.key&&!e.shiftKey&&this.messageForm.dispatchEvent(new Event("submit"))}))}static open(e){this.node.innerHTML="",this.currentUser=e.login;const t=S("p",[B.userName],{},this.currentUser);t.dataset.online=e.isLogined?.toString(),this.node.append(S("div",[B.headerDialogue],{},S("span",[],{},t)),this.messagesContainer,this.messageForm),R.messagesFrom(e.login)}static showMessage(e){const t=e.payload?.messages;this.unreadedWrap.innerHTML="",e.id===G.currentUser&&(t?.length?(this.messagesContainer.innerHTML="",t.forEach((e=>{this.addMessage(e)})),G.messagesContainer.append(G.unreadedWrap),this.messagesContainer.lastChild.scrollIntoView(!1)):this.messagesContainer.innerHTML="<p>Здесь пока нет сообщений</p>")}static addMessage(e){if(e?.from===G.currentUser||e?.to===G.currentUser){const t=new Z(e);(e.status?.isReaded||t.dataset.outcoming)&&(this.messagesContainer.append(t),t.scrollIntoView()),!e.id||e.status?.isReaded||t.dataset.outcoming||this.unreadedWrap.append(t)}}static updateCurrentDialogue(e){e?.forEach((e=>{G.currentUser===e.login&&G.open(e)}))}static fixReadingState(){Object.values(G.unreadedWrap.children).forEach((e=>{e.payload?.to===sessionStorage.getItem("login")&&(this.messagesContainer.append(e),R.fixReadingState(e.payload?.id))}))}static getMessageById(e){return Object.values(this.messagesContainer.querySelectorAll('[data-is-readed="false"]')).find((t=>t.payload.id===e))}}var K=n(161),X={};X.styleTagTransform=u(),X.setAttributes=d(),X.insert=o().bind(null,"head"),X.domAPI=i(),X.insertStyleElement=c(),t()(K.A,X);const $=K.A&&K.A.locals?K.A.locals:void 0;class ee{constructor(){ee.userList=[],ee.input=new L("Введите имя пользователя","text",$.input,"userSearch"),ee.privateNode=S("ul",[$.list],{},ee.input)}static init(){ee.input.addEventListener("input",(({target:e})=>{const t=e;ee.view(ee.userList.filter((e=>e.login.toLowerCase().includes(t.value.toLowerCase()))))}))}static clear(){for(;!(this.node.lastChild instanceof HTMLInputElement);)this.node.lastChild?.remove()}static reset(){this.userList.length=0}static view(e=this.userList){this.clear(),e.forEach((e=>{if(sessionStorage.getItem("login")!==e.login){const t=S("li",[e.isLogined?$.active:$.offline,$.contact]);t.addEventListener("click",(()=>{G.open(e),this.updateActiveContact()})),t.textContent=e.login,t.dataset.login=e.login,this.privateNode.append(S("div",[$.contactWrap],{},t)),this.updateActiveContact()}}))}static addUsers(...e){this.userList.push(...e),e.forEach((e=>{R.messagesFrom(e.login)})),this.view()}static get node(){return this.privateNode}static updateCounter(e){const t=e.payload?.messages?.filter((e=>!e.status?.isReaded&&e.from!==sessionStorage.getItem("login"))).length,n=document.querySelector(`[data-login="${e.id}"]`),s=S("span",[$.counter],{},t?.toString()||"");t&&n?.nextSibling?n.nextSibling.replaceWith(s):0!==t&&n?.after(s)}static updateActiveContact(){ee.privateNode.querySelector(`.${$.activeContact}`)?.classList.remove($.activeContact),ee.privateNode.querySelectorAll(`.${$.contact}`).forEach((e=>{e.textContent===G.currentUser&&e.classList.add($.activeContact)}))}static resetCounter(){this.privateNode.querySelector(`.${$.activeContact} + .${$.counter}`)?.remove()}}const te=n.p+"img/githublink.62e036ce8c18165793a3.png";var ne=n(377),se={};se.styleTagTransform=u(),se.setAttributes=d(),se.insert=o().bind(null,"head"),se.domAPI=i(),se.insertStyleElement=c(),t()(ne.A,se);const ie=ne.A&&ne.A.locals?ne.A.locals:void 0;class ae extends HTMLDivElement{constructor(){super();const e=S("a",[ie.githubLink],{href:"https://github.com/AndreiMakhnach2209"},S("img",[ie.linkImage],{src:te,alt:"Andrei Makhnach"})),t=S("a",[ie.linkSchool],{href:"https://rs.school/"},S("img",[ie.logoSchool],{src:"https://rollingscopes.com/assets/rs-logo-2XN05XgC.webp",alt:"RSSchool"}));this.className=ie.footerInner,this.append(e,"2024",t)}insert(){document.body.append(S("footer",[ie.footer],{},this))}}customElements.define("footer-inner",ae,{extends:"div"});var oe=n(713),re={};re.styleTagTransform=u(),re.setAttributes=d(),re.insert=o().bind(null,"head"),re.domAPI=i(),re.insertStyleElement=c(),t()(oe.A,re);const de=oe.A&&oe.A.locals?oe.A.locals:void 0;class le extends HTMLDivElement{constructor(e){super();const t=e.payload?.user?.login,n=S("span",[de.userName]);n.textContent=t||null;const s=S("h1",[de.title]);s.textContent="RSS-чат";const i=new x("Выйти"),a={id:"log_out",type:"USER_LOGOUT",payload:{user:{login:t??sessionStorage.getItem("login"),password:sessionStorage.getItem("password")}}};i.addEventListener("click",(()=>{R.chat.send(JSON.stringify(a))})),this.className=de.headerInner,this.append(n,s,i)}insert(){document.body.prepend(S("header",[de.header],{},this))}}customElements.define("header-inner",le,{extends:"div"});var ce=n(985),pe={};pe.styleTagTransform=u(),pe.setAttributes=d(),pe.insert=o().bind(null,"head"),pe.domAPI=i(),pe.insertStyleElement=c(),t()(ce.A,pe);const ue=ce.A&&ce.A.locals?ce.A.locals:void 0;class me extends HTMLDivElement{constructor(){super(),this.className=ue.mainInner,this.append(Object.getPrototypeOf(new ee).constructor.node,Object.getPrototypeOf(new G).constructor.node)}init(e){document.body.append(S("main",[ue.main],{},this)),ee.init(),Q.close(),new le(e).insert(),(new ae).insert(),R.updateUsers()}static reset(){ee.reset(),function(){for(;document.body.firstChild;)document.body.firstChild.remove()}(),sessionStorage.clear(),document.body.append(new Q)}}customElements.define("main-inner",me,{extends:"div"}),R.chat.addEventListener("message",(async({data:e})=>{const t=await JSON.parse(e);!function(e){switch(e.type){case"USER_LOGIN":(new me).init(e);break;case"USER_LOGOUT":me.reset();break;case"USER_ACTIVE":case"USER_INACTIVE":G.updateCurrentDialogue(e.payload?.users),ee.addUsers(...e.payload?.users||[]);break;case"USER_EXTERNAL_LOGIN":case"USER_EXTERNAL_LOGOUT":ee.reset(),R.updateUsers()}}(t),function(e){switch(e.type){case"MSG_FROM_USER":G.showMessage(e),ee.updateCounter(e);break;case"MSG_SEND":G.addMessage(e.payload?.message),e.payload?.message?.from&&R.messagesFrom(e.payload?.message?.from);break;case"MSG_READ":G.getMessageById(e.payload?.message?.id??"")&&ee.resetCounter(),G.getMessageById(e.payload?.message?.id??"")?.setAttribute("data-is-readed","true");break;case"MSG_DELIVER":G.currentUser&&R.messagesFrom(G.currentUser)}}(t),function(e){"ERROR"===e.type&&document.body.append(new _(e.payload?.error))}(t)})),document.body.append(new Q)})()})();