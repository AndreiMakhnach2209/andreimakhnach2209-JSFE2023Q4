(()=>{"use strict";var e={377:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(601),i=s.n(n),a=s(314),o=s.n(a)()(i());o.push([e.id,".QU11EUQK8wT5OR7niN7v{height:50px;margin-top:auto}.QU11EUQK8wT5OR7niN7v .yv8nZtgYUW3elhniJxB8{display:flex;justify-content:space-around;align-items:center}.QU11EUQK8wT5OR7niN7v .yv8nZtgYUW3elhniJxB8 .gLbOItwcnL72MYWa4t0a .dFGfRGsELHPI7Xl2ZWL3{filter:invert(1)}.QU11EUQK8wT5OR7niN7v .yv8nZtgYUW3elhniJxB8 .WjTZyaB7rwASdpBI4Vk5 .yFNmio6dzuz8ILqEr6iF{max-height:50px}",""]),o.locals={footer:"QU11EUQK8wT5OR7niN7v",footerInner:"yv8nZtgYUW3elhniJxB8",githubLink:"gLbOItwcnL72MYWa4t0a",linkImage:"dFGfRGsELHPI7Xl2ZWL3",linkSchool:"WjTZyaB7rwASdpBI4Vk5",logoSchool:"yFNmio6dzuz8ILqEr6iF"};const r=o},713:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(601),i=s.n(n),a=s(314),o=s.n(a)()(i());o.push([e.id,".YbpQ9gtMrwOGgKdlVAt7{display:flex;justify-content:space-around;align-items:center;height:80px}",""]),o.locals={headerInner:"YbpQ9gtMrwOGgKdlVAt7"};const r=o},985:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(601),i=s.n(n),a=s(314),o=s.n(a)()(i());o.push([e.id,".GR68F5W4JQcNF7X9PZoq{display:flex;flex-grow:1;max-height:calc(100vh - 130px)}.GR68F5W4JQcNF7X9PZoq .K5qkcSsgsIMTHJrMAgJh{display:flex;width:100%}",""]),o.locals={main:"GR68F5W4JQcNF7X9PZoq",mainInner:"K5qkcSsgsIMTHJrMAgJh"};const r=o},479:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(601),i=s.n(n),a=s(314),o=s.n(a)()(i());o.push([e.id,'.NHdI8WfnL_Qt84EanP8D{display:flex;flex-direction:column;align-items:center;width:70%;border:1px solid #000}.NHdI8WfnL_Qt84EanP8D .p_Ff4a4XBpwmR72iDUGu{margin:auto}.NHdI8WfnL_Qt84EanP8D .tbAoWpDQcuuQOi2AclGQ{justify-self:start;height:60px;width:100%;border:1px solid #000}.NHdI8WfnL_Qt84EanP8D .tbAoWpDQcuuQOi2AclGQ .sEejf0HS1vekoI6ag7um{text-align:center;margin:10px;font-size:1.5rem;font-style:bold}.NHdI8WfnL_Qt84EanP8D .syDcxQLfsmuwx5QRVUOQ{display:flex;flex-direction:column;overflow-y:scroll;width:100%;height:calc(100% - 180px);gap:10px;padding:15px}.NHdI8WfnL_Qt84EanP8D .syDcxQLfsmuwx5QRVUOQ>p{align-self:center;height:100%}.NHdI8WfnL_Qt84EanP8D .syDcxQLfsmuwx5QRVUOQ .fDzqugL_RtzZNipciwxk{display:flex;flex-direction:column;width:100%;gap:10px;border-top:3px dashed #444}.NHdI8WfnL_Qt84EanP8D .syDcxQLfsmuwx5QRVUOQ .fDzqugL_RtzZNipciwxk::before{content:"Непрочитанные сообщения";display:block;text-align:center;font-size:.8rem;opacity:.7}.NHdI8WfnL_Qt84EanP8D .syDcxQLfsmuwx5QRVUOQ .fDzqugL_RtzZNipciwxk:empty{display:none}.NHdI8WfnL_Qt84EanP8D .CVgUqVtnFzqYfu5jLcPY{display:flex;align-items:end;width:95%}.NHdI8WfnL_Qt84EanP8D .CVgUqVtnFzqYfu5jLcPY .ol0TsE0qYyy7wTjt6zh2{width:100%;height:120px;padding:10px;border-radius:10px}.NHdI8WfnL_Qt84EanP8D .CVgUqVtnFzqYfu5jLcPY .ol0TsE0qYyy7wTjt6zh2:invalid{border:1px solid #000}.NHdI8WfnL_Qt84EanP8D .CVgUqVtnFzqYfu5jLcPY [type=submit]{height:100%;width:100px}[data-online]::after{margin-left:15px;font-size:1rem;opacity:.7}[data-online=true]::after{color:green;content:"В сети"}[data-online=false]::after{color:red;content:"Не в сети"}',""]),o.locals={dialogue:"NHdI8WfnL_Qt84EanP8D",startMessage:"p_Ff4a4XBpwmR72iDUGu",headerDialogue:"tbAoWpDQcuuQOi2AclGQ",userName:"sEejf0HS1vekoI6ag7um",messages:"syDcxQLfsmuwx5QRVUOQ",unreadedMessages:"fDzqugL_RtzZNipciwxk",messageForm:"CVgUqVtnFzqYfu5jLcPY",messageInput:"ol0TsE0qYyy7wTjt6zh2"};const r=o},682:(e,t,s)=>{s.d(t,{A:()=>h});var n=s(601),i=s.n(n),a=s(314),o=s.n(a),r=s(417),d=s.n(r),l=new URL(s(850),s.b),c=new URL(s(112),s.b),p=o()(i()),u=d()(l),m=d()(c);p.push([e.id,`.j6fC13fBR7eG3UYKr7bS{position:relative;align-self:flex-start;width:80%;padding:5px 5px 20px 5px;white-space:pre-wrap;word-wrap:break-word;border-radius:10px;border:1px dashed #000;box-shadow:0 0 5px 1px #000}.j6fC13fBR7eG3UYKr7bS .F1W_rVWL7Byvt0Q3jT0z{position:absolute;right:10px}.j6fC13fBR7eG3UYKr7bS .F1W_rVWL7Byvt0Q3jT0z::after{margin-left:20px;opacity:.6}.j6fC13fBR7eG3UYKr7bS .F1W_rVWL7Byvt0Q3jT0z::before{margin-right:20px;opacity:.6}.j6fC13fBR7eG3UYKr7bS .qLlfMsYVspdXKzmZlDCJ{display:none}[data-outcoming=true] .qLlfMsYVspdXKzmZlDCJ{display:flex;justify-content:space-around}[data-outcoming=true] .qLlfMsYVspdXKzmZlDCJ .y59QYqUeZ_chP7gSj_1O{height:20px;margin-left:10px;border-radius:5px;border:1px solid rgba(0,0,0,.4);font-size:.8rem;opacity:.6;transition:.3s}[data-outcoming=true] .qLlfMsYVspdXKzmZlDCJ .y59QYqUeZ_chP7gSj_1O:hover{scale:1.05;box-shadow:0 0 7px 0 #000;cursor:pointer}[data-outcoming=true] .qLlfMsYVspdXKzmZlDCJ .gUWavRol7yaXsbAT4EEU::after{content:url(${u});vertical-align:middle}[data-outcoming=true] .qLlfMsYVspdXKzmZlDCJ .YSbrvnv3DXbn2mA4XBPy::after{content:url(${m});vertical-align:middle}[data-outcoming=true]{align-self:flex-end;background-color:rgba(0,0,0,.1254901961)}[data-outcoming=true] .F1W_rVWL7Byvt0Q3jT0z::after{content:"Отправлено"}[data-is-delivered=true][data-outcoming=true] .F1W_rVWL7Byvt0Q3jT0z::after{content:"Доставлено"}[data-is-readed=true][data-outcoming=true] .F1W_rVWL7Byvt0Q3jT0z::after{content:"Прочитано"}[data-is-edited=true] .F1W_rVWL7Byvt0Q3jT0z::before{content:"Изменено"}[data-is-deleted=true] .F1W_rVWL7Byvt0Q3jT0z::before{content:"Удалено"}.ZdOeqgQ1dlt_7_dzxKlQ{width:90%;height:90%;position:absolute;top:5%;left:5%;z-index:10;padding:20px;border-radius:7px;box-shadow:0 0 10px 0 #000;background-color:#cdcdcd}`,""]),p.locals={message:"j6fC13fBR7eG3UYKr7bS",messageDate:"F1W_rVWL7Byvt0Q3jT0z",btnWrap:"qLlfMsYVspdXKzmZlDCJ",btn:"y59QYqUeZ_chP7gSj_1O",editBtn:"gUWavRol7yaXsbAT4EEU",deleteBtn:"YSbrvnv3DXbn2mA4XBPy",textArea:"ZdOeqgQ1dlt_7_dzxKlQ"};const h=p},161:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(601),i=s.n(n),a=s(314),o=s.n(a)()(i());o.push([e.id,".K98daOlvBJZzvFwBJphC{position:relative;flex-basis:30%;margin:0;height:100%;border:1px solid #000;overflow-y:scroll;overflow-x:hidden}.K98daOlvBJZzvFwBJphC .opLD4mPXPMHX5kVpmo9K{position:sticky;transform:translateX(-30px);width:100%;margin:10px;background-color:#fff}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm{display:flex;align-items:baseline;position:relative;margin-right:5px;white-space:pre-wrap;word-wrap:break-word}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm .cict787Yh_lLYToBR5PL{width:95%;min-height:35px;padding:2px 25px 2px 5px;user-select:none;cursor:pointer;transition:.3s;border-radius:7px}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm .cict787Yh_lLYToBR5PL:hover:not(.e_GSh77oarxAqd37t1pW){box-shadow:0 0 5px 0 #000}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm .e_GSh77oarxAqd37t1pW{font-weight:bold;box-shadow:0 0 10px 0 #000}.K98daOlvBJZzvFwBJphC .HAiJk4LZbDqAVw0UHJhm .erFz2yPREKdDiaKJp0t7{position:absolute;right:5px;top:50%;transform:translateY(-50%);width:20px;height:20px;padding:.1rem;border-radius:50%;color:#fff;font-weight:bold;text-align:center;background-color:red}.K98daOlvBJZzvFwBJphC .m2eul6CV1o6RwDwYipVn::marker{color:green;font-size:24px}.K98daOlvBJZzvFwBJphC .id0hpQVjzXxtJwvBNyyQ::marker{color:red;font-size:24px}",""]),o.locals={list:"K98daOlvBJZzvFwBJphC",input:"opLD4mPXPMHX5kVpmo9K",contactWrap:"HAiJk4LZbDqAVw0UHJhm",contact:"cict787Yh_lLYToBR5PL",activeContact:"e_GSh77oarxAqd37t1pW",counter:"erFz2yPREKdDiaKJp0t7",active:"m2eul6CV1o6RwDwYipVn",offline:"id0hpQVjzXxtJwvBNyyQ"};const r=o},179:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(601),i=s.n(n),a=s(314),o=s.n(a)()(i());o.push([e.id,"",""]),o.locals={};const r=o},771:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(601),i=s.n(n),a=s(314),o=s.n(a)()(i());o.push([e.id,"",""]),o.locals={};const r=o},695:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(601),i=s.n(n),a=s(314),o=s.n(a)()(i());o.push([e.id,".cOwPEmal6rpCMrg8YeSg{width:80px;height:35px;border-radius:7px;box-shadow:0 0 5px 0 #000 inset;scale:.9;transition:.3s}.cOwPEmal6rpCMrg8YeSg:enabled:hover{scale:1;cursor:pointer;box-shadow:0 0 10px 0 #000}.cOwPEmal6rpCMrg8YeSg:disabled{opacity:.9;cursor:not-allowed}",""]),o.locals={button:"cOwPEmal6rpCMrg8YeSg"};const r=o},281:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(601),i=s.n(n),a=s(314),o=s.n(a)()(i());o.push([e.id,".upeDYVY5rjZuo92lox9J{padding:5px 15px;height:45px;border-radius:10px}.upeDYVY5rjZuo92lox9J:invalid{border:1px dashed red}.upeDYVY5rjZuo92lox9J:hover,.upeDYVY5rjZuo92lox9J:focus{border:2px solid #000;cursor:pointer;outline:none}.upeDYVY5rjZuo92lox9J:hover:invalid,.upeDYVY5rjZuo92lox9J:focus:invalid{border-color:red}.upeDYVY5rjZuo92lox9J::placeholder{color:#333}",""]),o.locals={input:"upeDYVY5rjZuo92lox9J"};const r=o},962:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(601),i=s.n(n),a=s(314),o=s.n(a)()(i());o.push([e.id,".h2ljNwAH8BHj4k4I803A{position:absolute;z-index:100;display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;background-color:#fff}.h2ljNwAH8BHj4k4I803A>*{display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;gap:10px;width:40%;height:40%;padding:15px;border:1px solid #000;border-radius:10px;box-shadow:0 0 30px 5px #222}.uSLqwUWm7rXwdTmq5eQW{display:none}",""]),o.locals={modal:"h2ljNwAH8BHj4k4I803A",hidden:"uSLqwUWm7rXwdTmq5eQW"};const r=o},2:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(601),i=s.n(n),a=s(314),o=s.n(a)()(i());o.push([e.id,"*{box-sizing:border-box}body{display:flex;flex-direction:column;min-height:100vh;max-width:100vw;overflow:hidden}",""]);const r=o},245:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(601),i=s.n(n),a=s(314),o=s.n(a)()(i());o.push([e.id,"html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}h1{font-size:2em;margin:.67em 0}dl dl,dl ol,dl ul,ol dl,ul dl{margin:0}ol ol,ol ul,ul ol,ul ul{margin:0}hr{box-sizing:content-box;color:inherit;height:0;overflow:visible}main{display:block}pre{font-family:monospace,monospace;font-size:1em}a{background-color:rgba(0,0,0,0)}abbr[title]{text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}table{border-color:inherit;text-indent:0}button,input,select{margin:0}button{overflow:visible;text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}fieldset{padding:.35em .75em .625em}input{overflow:visible}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;white-space:normal}progress{display:inline-block;vertical-align:baseline}select{text-transform:none}textarea{margin:0;overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}details{display:block}dialog{background-color:#fff;border:solid;color:#000;display:block;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;left:0;margin:auto;padding:1em;position:absolute;right:0;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}dialog:not([open]){display:none}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}",""]);const r=o},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",n=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),n&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),n&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,n,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var r=0;r<this.length;r++){var d=this[r][0];null!=d&&(o[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);n&&o[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),s&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=s):c[2]=s),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function s(e){for(var s=-1,n=0;n<t.length;n++)if(t[n].identifier===e){s=n;break}return s}function n(e,n){for(var a={},o=[],r=0;r<e.length;r++){var d=e[r],l=n.base?d[0]+n.base:d[0],c=a[l]||0,p="".concat(l," ").concat(c);a[l]=c+1;var u=s(p),m={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)t[u].references++,t[u].updater(m);else{var h=i(m,n);n.byIndex=r,t.splice(r,0,{identifier:p,updater:h,references:1})}o.push(p)}return o}function i(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,i){var a=n(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var r=s(a[o]);t[r].references--}for(var d=n(e,i),l=0;l<a.length;l++){var c=s(a[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}a=d}}},659:e=>{var t={};e.exports=function(e,s){var n=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var i=void 0!==s.layer;i&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,i&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var a=s.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},112:(e,t,s)=>{e.exports=s.p+"icons/delete_FILL0_wght400_GRAD0_opsz24.642da2f9203fed7e99a0.svg"},850:(e,t,s)=>{e.exports=s.p+"icons/edit_note_FILL0_wght400_GRAD0_opsz24.276a42c9b1e52559c553.svg"}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,exports:{}};return e[n](a,a.exports,s),a.exports}s.m=e,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=n[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),s.b=document.baseURI||self.location.href,s.nc=void 0,(()=>{var e=s(72),t=s.n(e),n=s(825),i=s.n(n),a=s(659),o=s.n(a),r=s(56),d=s.n(r),l=s(540),c=s.n(l),p=s(113),u=s.n(p),m=s(962),h={};h.styleTagTransform=u(),h.setAttributes=d(),h.insert=o().bind(null,"head"),h.domAPI=i(),h.insertStyleElement=c(),t()(m.A,h);const g=m.A&&m.A.locals?m.A.locals:void 0;class f extends HTMLDivElement{constructor(...e){super(),this.className=g.modal,this.append(...e)}show(){this.classList.remove(g.hidden)}hide(){this.classList.add(g.hidden)}}customElements.define("custom-modal",f,{extends:"div"});var v=s(695),b={};b.styleTagTransform=u(),b.setAttributes=d(),b.insert=o().bind(null,"head"),b.domAPI=i(),b.insertStyleElement=c(),t()(v.A,b);const y=v.A&&v.A.locals?v.A.locals:void 0;class x extends HTMLInputElement{constructor(e="button",t="button",s=!1,n){super(),this.className=y.button,this.type=t,this.value=e,this.disabled=s,n&&(this.name=n)}}customElements.define("custom-btn",x,{extends:"input"});var w=s(281),A={};A.styleTagTransform=u(),A.setAttributes=d(),A.insert=o().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=c(),t()(w.A,A);const L=w.A&&w.A.locals?w.A.locals:void 0;class E extends HTMLInputElement{constructor(e="Введитие текст",t="text",s,n){super(),this.className=L.input,this.classList.add(s??L.input),this.type=t,this.placeholder=e,n&&(this.name=n)}}function S(e="div",t,s,...n){const i=document.createElement(e);return i.classList.add(...t??[]),s&&Object.entries(s).forEach((([e,t])=>{i.setAttribute(e,t)})),i.append(...n),i}customElements.define("custom-text-input",E,{extends:"input"});var I=s(771),T={};T.styleTagTransform=u(),T.setAttributes=d(),T.insert=o().bind(null,"head"),T.domAPI=i(),T.insertStyleElement=c(),t()(I.A,T);const C=I.A&&I.A.locals?I.A.locals:void 0;function D(e){const{target:t}=e;if(t instanceof HTMLInputElement){switch(!0){case t.validity.tooShort:"password"===t.type?t.setCustomValidity("Пароль не должен быть короче 6 символов. Исползуйте цифры, строчные и заглавные буквы"):t.setCustomValidity("Имя слишком короткое!");break;case t.validity.tooLong:t.setCustomValidity("Имя не должно быть больше 20 символов");break;case t.validity.patternMismatch:t.setCustomValidity("Пароль должен содержать как минимум одну цифру, одну строчную букву и одну заглавную букву");break;default:t.setCustomValidity("")}t.reportValidity()}}function U(e){let t=null;if((e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)&&(t=e.target.form),t instanceof HTMLFormElement){const e=t.querySelector('[type="submit"]');e instanceof HTMLInputElement&&(e.disabled=!t.checkValidity())}}function _(e){const t=new FormData(e),s={};return t.forEach(((e,t)=>{s[t]=e})),s}class k{static updateUsers(){k.chat.send(JSON.stringify({id:"activeUser",type:"USER_ACTIVE",payload:null})),k.chat.send(JSON.stringify({id:"inactiveUser",type:"USER_INACTIVE",payload:null}))}static messagesFrom(e){const t={id:e,type:"MSG_FROM_USER",payload:{user:{login:e}}};e!==sessionStorage.getItem("login")&&k.chat.send(JSON.stringify(t))}static fixReadingState(e){const t={id:`READ_STATE_FROM_${e}`,type:"MSG_READ",payload:{message:{id:e}}};k.chat.send(JSON.stringify(t))}static editMessage(e,t){const s={id:t,type:"MSG_EDIT",payload:{message:{id:t,text:e}}};k.chat.send(JSON.stringify(s))}}k.chat=new WebSocket("ws://127.0.0.1:4000");const R=k;class Q extends f{constructor(){if(super(),this.formLogin=S("form",[C.form],{name:"login"}),Q.node)return;Q.node=this;const[e,t,s,n]=[new E("Имя","text"),new E("Пароль","password"),new x("Войти","submit"),new x("Инфо")];e.required=!0,e.autofocus=!0,e.name="login",e.addEventListener("input",D),e.minLength=3,e.maxLength=20,t.required=!0,t.name="password",t.pattern="(?=.*[a-zа-я])(?=.*[A-ZА-Я])(?=.*[0-9]).*",t.addEventListener("input",D),t.minLength=6,s.disabled=!0;const i=S("legend",[C.legend]);i.textContent="Авторизация пользователя",this.formLogin.append(i,e,t,s,n),this.append(this.formLogin),this.formInit()}static close(){Q.node?.remove(),Q.node=void 0}formInit(){this.formLogin.addEventListener("submit",(e=>{e.preventDefault();const t=_(this.formLogin);Object.entries(t).forEach((([e,t])=>{sessionStorage.setItem(e,t)}));const s={id:"authUser",type:"USER_LOGIN",payload:{user:t}};R.chat.send(JSON.stringify(s))})),this.formLogin.addEventListener("input",U)}}customElements.define("modal-login",Q,{extends:"div"});var z=s(2),M={};M.styleTagTransform=u(),M.setAttributes=d(),M.insert=o().bind(null,"head"),M.domAPI=i(),M.insertStyleElement=c(),t()(z.A,M),z.A&&z.A.locals&&z.A.locals;var N=s(245),B={};B.styleTagTransform=u(),B.setAttributes=d(),B.insert=o().bind(null,"head"),B.domAPI=i(),B.insertStyleElement=c(),t()(N.A,B),N.A&&N.A.locals&&N.A.locals;var J=s(179),V={};V.styleTagTransform=u(),V.setAttributes=d(),V.insert=o().bind(null,"head"),V.domAPI=i(),V.insertStyleElement=c(),t()(J.A,V);const O=J.A&&J.A.locals?J.A.locals:void 0;class W extends f{constructor(e){super(),this.classList.add(O.modal);const t=new x("Зактрыть");t.addEventListener("click",(()=>this.remove()));const s=S("div",[O.message],{},e||"",t);this.append(s),setTimeout((()=>t.focus()),500)}}customElements.define("error-message",W,{extends:"div"});var Y=s(479),F={};F.styleTagTransform=u(),F.setAttributes=d(),F.insert=o().bind(null,"head"),F.domAPI=i(),F.insertStyleElement=c(),t()(Y.A,F);const j=Y.A&&Y.A.locals?Y.A.locals:void 0;var P=s(682),q={};q.styleTagTransform=u(),q.setAttributes=d(),q.insert=o().bind(null,"head"),q.domAPI=i(),q.insertStyleElement=c(),t()(P.A,q);const H=P.A&&P.A.locals?P.A.locals:void 0;class Z extends HTMLDivElement{constructor(e){super(),this.messageState=S(),this.text=S("p",[H.textContent]),this.editBtn=S("div",[H.btn,H.editBtn],{},"Редактировать"),this.deleteBtn=S("div",[H.btn,H.deleteBtn],{},"Удалить"),this.editWrap=S("div",[H.btnWrap],{},this.editBtn,this.deleteBtn),this.className=H.message,e&&(this.setStatus(e),this.messageState.append(S("span",[H.messageDate],{},e?.datetime?new Date(e.datetime).toLocaleString():"")),this.text.textContent=e.text,this.append(this.editWrap,this.text,this.messageState),this.editWrap.addEventListener("click",(()=>{this.edit()})))}setStatus(e){this.payload=e,e.from===sessionStorage.getItem("login")&&(this.dataset.outcoming="true"),[this.dataset.isDelivered,this.dataset.isReaded,this.dataset.isDeleted,this.dataset.isEdited]=[e.status?.isDelivered?.toString(),e.status?.isReaded?.toString(),e.status?.isDeleted?.toString(),e.status?.isEdited?.toString()]}edit(){const e=S("textarea",[H.textArea],{title:'Для подтверждения нажмите "Enter"'});e.value=this.payload?.text||"",e.addEventListener("blur",(()=>e.remove())),this.append(e),e.focus(),e.addEventListener("keyup",(t=>{t instanceof KeyboardEvent&&"Enter"===t.key&&!t.shiftKey&&this.payload?.id&&(R.editMessage(e.value,this.payload?.id),e.blur(),this.dataset.isEdited="true")}))}}customElements.define("message-element",Z,{extends:"div"});class K{constructor(){K.node=S("div",[j.dialogue],{},S("p",[j.startMessage],{},"Выберите пользователя для получения и отправки сообщений")),K.unreadedWrap=S("div",[j.unreadedMessages]),K.messagesContainer=S("div",[j.messages]),K.messageInput=S("textarea",[j.messageInput],{name:"message",placeholder:"Введите здесь свое сообщение",autocomplete:"off"}),K.messageForm=S("form",[j.messageForm],{name:"messageForm",id:"messageForm"},K.messageInput,new x("Отправить","submit",!0,"submitBtn")),K.currentUser=null,K.init()}static init(){this.messageInput.required=!0,this.messageForm.addEventListener("input",U),this.messageForm.addEventListener("submit",(e=>{e.preventDefault();const t=_(this.messageForm);this.messageForm.reset(),this.messageForm.elements.namedItem("submitBtn").disabled=!0;const s={id:"sending_message",type:"MSG_SEND",payload:{message:{to:this.currentUser||"",text:t.message}}};R.chat.send(JSON.stringify(s)),this.fixReadingState()})),K.messagesContainer.addEventListener("wheel",(()=>{this.fixReadingState()})),K.messagesContainer.addEventListener("click",(()=>{this.fixReadingState()})),this.messageInput.addEventListener("keyup",(e=>{e instanceof KeyboardEvent&&"Enter"===e.key&&!e.shiftKey&&this.messageForm.dispatchEvent(new Event("submit",{cancelable:!0}))}))}static open(e){this.node.innerHTML="",this.currentUser=e.login;const t=S("p",[j.userName],{},this.currentUser);t.dataset.online=e.isLogined?.toString(),this.node.append(S("div",[j.headerDialogue],{},S("span",[],{},t)),this.messagesContainer,this.messageForm),R.messagesFrom(e.login)}static showMessage(e){const t=e.payload?.messages;this.unreadedWrap.innerHTML="",e.id===K.currentUser&&(t?.length?(this.messagesContainer.innerHTML="",t.forEach((e=>{this.addMessage(e)})),K.messagesContainer.append(K.unreadedWrap),this.messagesContainer.lastChild.scrollIntoView(!1)):this.messagesContainer.innerHTML="<p>Здесь пока нет сообщений</p>")}static addMessage(e){if(e?.from===K.currentUser||e?.to===K.currentUser){const t=new Z(e);(e.status?.isReaded||t.dataset.outcoming)&&(this.messagesContainer.append(t),t.scrollIntoView()),!e.id||e.status?.isReaded||t.dataset.outcoming||this.unreadedWrap.append(t)}}static updateCurrentDialogue(e){e?.forEach((e=>{K.currentUser===e.login&&K.open(e)}))}static fixReadingState(){Object.values(K.unreadedWrap.children).forEach((e=>{e.payload?.to===sessionStorage.getItem("login")&&(this.messagesContainer.append(e),R.fixReadingState(e.payload?.id))}))}static getMessageById(e){return Object.values(this.messagesContainer.querySelectorAll("[data-is-readed]")).find((t=>t.payload.id===e))}}var G=s(161),X={};X.styleTagTransform=u(),X.setAttributes=d(),X.insert=o().bind(null,"head"),X.domAPI=i(),X.insertStyleElement=c(),t()(G.A,X);const $=G.A&&G.A.locals?G.A.locals:void 0;class ee{constructor(){ee.userList=[],ee.input=new E("Введите имя пользователя","text",$.input,"userSearch"),ee.privateNode=S("ul",[$.list],{},ee.input)}static init(){ee.input.addEventListener("input",(({target:e})=>{const t=e;ee.view(ee.userList.filter((e=>e.login.toLowerCase().includes(t.value.toLowerCase()))))}))}static clear(){for(;!(this.node.lastChild instanceof HTMLInputElement);)this.node.lastChild?.remove()}static reset(){this.userList.length=0}static view(e=this.userList){this.clear(),e.forEach((e=>{if(sessionStorage.getItem("login")!==e.login){const t=S("li",[e.isLogined?$.active:$.offline,$.contact]);t.addEventListener("click",(()=>{K.open(e),this.updateActiveContact()})),t.textContent=e.login,t.dataset.login=e.login,this.privateNode.append(S("div",[$.contactWrap],{},t)),this.updateActiveContact()}}))}static addUsers(...e){this.userList.push(...e),e.forEach((e=>{R.messagesFrom(e.login)})),this.view()}static get node(){return this.privateNode}static updateCounter(e){const t=e.payload?.messages?.filter((e=>!e.status?.isReaded&&e.from!==sessionStorage.getItem("login"))).length,s=document.querySelector(`[data-login="${e.id}"]`),n=S("span",[$.counter],{},t?.toString()||"");t&&s?.nextSibling?s.nextSibling.replaceWith(n):0!==t&&s?.after(n)}static updateActiveContact(){ee.privateNode.querySelector(`.${$.activeContact}`)?.classList.remove($.activeContact),ee.privateNode.querySelectorAll(`.${$.contact}`).forEach((e=>{e.textContent===K.currentUser&&e.classList.add($.activeContact)}))}static resetCounter(){this.privateNode.querySelector(`.${$.activeContact} + .${$.counter}`)?.remove()}}const te=s.p+"img/githublink.62e036ce8c18165793a3.png";var se=s(377),ne={};ne.styleTagTransform=u(),ne.setAttributes=d(),ne.insert=o().bind(null,"head"),ne.domAPI=i(),ne.insertStyleElement=c(),t()(se.A,ne);const ie=se.A&&se.A.locals?se.A.locals:void 0;class ae extends HTMLDivElement{constructor(){super();const e=S("a",[ie.githubLink],{href:"https://github.com/AndreiMakhnach2209"},S("img",[ie.linkImage],{src:te,alt:"Andrei Makhnach"})),t=S("a",[ie.linkSchool],{href:"https://rs.school/"},S("img",[ie.logoSchool],{src:"https://rollingscopes.com/assets/rs-logo-2XN05XgC.webp",alt:"RSSchool"}));this.className=ie.footerInner,this.append(e,"2024",t)}insert(){document.body.append(S("footer",[ie.footer],{},this))}}customElements.define("footer-inner",ae,{extends:"div"});var oe=s(713),re={};re.styleTagTransform=u(),re.setAttributes=d(),re.insert=o().bind(null,"head"),re.domAPI=i(),re.insertStyleElement=c(),t()(oe.A,re);const de=oe.A&&oe.A.locals?oe.A.locals:void 0;class le extends HTMLDivElement{constructor(e){super();const t=e.payload?.user?.login,s=S("span",[de.userName]);s.textContent=t||null;const n=S("h1",[de.title]);n.textContent="RSS-чат";const i=new x("Выйти"),a={id:"log_out",type:"USER_LOGOUT",payload:{user:{login:t??sessionStorage.getItem("login"),password:sessionStorage.getItem("password")}}};i.addEventListener("click",(()=>{R.chat.send(JSON.stringify(a))})),this.className=de.headerInner,this.append(s,n,i)}insert(){document.body.prepend(S("header",[de.header],{},this))}}customElements.define("header-inner",le,{extends:"div"});var ce=s(985),pe={};pe.styleTagTransform=u(),pe.setAttributes=d(),pe.insert=o().bind(null,"head"),pe.domAPI=i(),pe.insertStyleElement=c(),t()(ce.A,pe);const ue=ce.A&&ce.A.locals?ce.A.locals:void 0;class me extends HTMLDivElement{constructor(){super(),this.className=ue.mainInner,this.append(Object.getPrototypeOf(new ee).constructor.node,Object.getPrototypeOf(new K).constructor.node)}init(e){document.body.append(S("main",[ue.main],{},this)),ee.init(),Q.close(),new le(e).insert(),(new ae).insert(),R.updateUsers()}static reset(){ee.reset(),function(){for(;document.body.firstChild;)document.body.firstChild.remove()}(),sessionStorage.clear(),document.body.append(new Q)}}customElements.define("main-inner",me,{extends:"div"}),R.chat.addEventListener("message",(async({data:e})=>{const t=await JSON.parse(e);!function(e){switch(e.type){case"USER_LOGIN":(new me).init(e);break;case"USER_LOGOUT":me.reset();break;case"USER_ACTIVE":case"USER_INACTIVE":K.updateCurrentDialogue(e.payload?.users),ee.addUsers(...e.payload?.users||[]);break;case"USER_EXTERNAL_LOGIN":case"USER_EXTERNAL_LOGOUT":ee.reset(),R.updateUsers()}}(t),function(e){switch(e.type){case"MSG_FROM_USER":K.showMessage(e),ee.updateCounter(e);break;case"MSG_SEND":K.addMessage(e.payload?.message),e.payload?.message?.from&&R.messagesFrom(e.payload?.message?.from);break;case"MSG_READ":K.getMessageById(e.payload?.message?.id??"")&&ee.resetCounter(),K.getMessageById(e.payload?.message?.id??"")?.setAttribute("data-is-readed","true");break;case"MSG_DELIVER":K.currentUser&&R.messagesFrom(K.currentUser);break;case"MSG_EDIT":K.getMessageById(e.payload?.message?.id??"").text.textContent=e.payload?.message?.text??null,K.getMessageById(e.payload?.message?.id??"")?.setAttribute("data-is-edited","true")}}(t),function(e){"ERROR"===e.type&&document.body.append(new W(e.payload?.error))}(t)})),document.body.append(new Q)})()})();